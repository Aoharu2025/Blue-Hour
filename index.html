<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ê³µì„í‘œ | Blue Archive</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Diphylleia&family=Grandiflora+One&family=Pretendard:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      /* âœ… ë„¤ê°€ ì—…ë¡œë“œí•œ ì´ë¯¸ì§€ ê²½ë¡œë¡œ ì—°ê²° */
      --bg-image: url("images/background.jpg");
      --hero-image: url("images/hero.png");
      --logo-image: url("images/logo.png");

      /* ì»¬ëŸ¬ ì‹œìŠ¤í…œ */
      --sky-1:#7fd6ff;
      --sky-2:#a7b7ff;
      --ink:#0b1220;
      --panel: rgba(255,255,255,.10);
      --stroke: rgba(255,255,255,.18);

      --text:#eef6ff;
      --muted: rgba(238,246,255,.72);

      --good:#86f7d6;
      --danger:#ff7ea2;

      /* âœ… â€œê³µì„(ğŸ”’ ì—†ìŒ)â€ì„ ê°•ì¡°í•  ê¸€ë¡œìš° */
      --vacantGlow: 0 0 0 2px rgba(134,247,214,.35), 0 10px 30px rgba(134,247,214,.18);
      --softGlow: 0 18px 50px rgba(0,0,0,.32);
      --radius: 18px;
    }

    * { box-sizing: border-box; }
    html,body { height: 100%; }
    body{
      margin:0;
      font-family: "Pretendard", system-ui, -apple-system, "Segoe UI", Arial, sans-serif;
      color: var(--text);
      background: #0b1220;
      overflow-x:hidden;
      position: relative;
      isolation: isolate; /* âœ… z-index ë ˆì´ì–´ ì•ˆì •í™” */
    }

    /* âœ… ë°°ê²½ ì´ë¯¸ì§€ (ì§„ì§œë¡œ â€œê³ ì •ëœ í•œ ì¥â€ì²˜ëŸ¼) */
    body::before{
      content:"";
      position: fixed;
      inset: 0;
      background: var(--bg-image) center/cover no-repeat;
      z-index: -2;
      transform: translateZ(0);
      will-change: transfrom;
    }

    /* âœ… ì˜¤ë²„ë ˆì´(ê·¸ë¼ë°ì´ì…˜)ë„ ê°™ì´ fixedë¡œ ê³ ì • */
    body::after{
      content:"";
      position: fixed;
      inset: 0;
      background:
        radial-gradient(1200px 600px at 20% 10%, rgba(127,214,255,.22), transparent 60%),
        radial-gradient(900px 500px at 80% 20%, rgba(167,183,255,.18), transparent 60%),
        radial-gradient(1000px 700px at 50% 100%, rgba(134,247,214,.10), transparent 55%),
        linear-gradient(180deg, rgba(11,18,32,.55), rgba(11,18,32,.78));
      z-index: -1;
      transform: translateZ(0);
      will-change: transform;
    }

    .app{
      max-width: 1280px;
      margin: 0 auto;
      padding: 20px 16px 40px;
      display: grid;
      grid-template-columns: 270px 1fr;
      gap: 16px;
    }

    @media (max-width: 980px){
      .app{ grid-template-columns: 1fr; }
    }

    /* ===== Hero ===== */
    .hero{
      height: 200px;
      grid-column: 1 / -1;
      border: 1px solid var(--stroke);
      border-radius: calc(var(--radius) + 6px);
      background:
        linear-gradient(135deg, rgba(127,214,255,.15), rgba(167,183,255,.10)),
        var(--hero-image) center/cover no-repeat;
      box-shadow: var(--softGlow);
      overflow: hidden;
      position: relative;
    }
    .hero::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(11,18,32,.35), rgba(11,18,32,.82));
    }
    .hero-inner{
      position: relative;
      z-index: 1;
      padding: 0;
      display:flex;
      align-items:center;
      justify-content:center;
      height: 100%;
    }

    /* ì¤‘ì•™ ë¡œê³  */
    .hero-logo{
      width: 480px;      /* ì›í•˜ëŠ” í¬ê¸°ë¡œ ì¡°ì ˆ */
      aspect-ratio: 3 / 1;      /* ë¹„ìœ¨ ë§ì¶°ì„œ ì¡°ì ˆ */
      background: var(--logo-image) center/contain no-repeat;
      filter: drop-shadow(0 8px 25px rgba(0,0,0,.45));
    }

    .stats{
      position:absolute;
      right: 20px;
      bottom: 20px;
      display:flex;
      gap:10px;
    }
    .pill{
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.08);
      border-radius: 999px;
      padding: 8px 10px;
      display:flex;
      gap: 8px;
      align-items:center;
      backdrop-filter: blur(10px);
    }
    .pill .dot{
      width: 10px; height: 10px;
      border-radius: 50%;
      background: var(--good);
      box-shadow: 0 0 0 3px rgba(134,247,214,.16);
    }
    .pill .dot.occupied{
      background: var(--danger);
      box-shadow: 0 0 0 3px rgba(255,126,162,.18);
    }
    .pill b{ font-size: 13px; }
    .pill span{ font-size: 12px; color: var(--muted); }

    /* ===== Sidebar ===== */
    .sidebar{
      border: 1px solid var(--stroke);
      background: var(--panel);
      border-radius: var(--radius);
      box-shadow: var(--softGlow);
      backdrop-filter: blur(12px);
      overflow: hidden;
    }
    .sidebar-head{
      padding: 14px 14px 10px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
    }
    .sidebar-head .title{
      font-weight: 700;
      font-size: 13px;
      letter-spacing: .2px;
      color: rgba(238,246,255,.9);
    }
    .nav{
      padding: 10px;
      display:flex;
      flex-direction:column;
      gap: 8px;
    }
    .nav-btn{
      all: unset;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      padding: 10px 10px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
    }
    .nav-btn:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.09);
      border-color: rgba(255,255,255,.18);
    }
    .nav-btn.active{
      background: linear-gradient(135deg, rgba(127,214,255,.18), rgba(167,183,255,.12));
      border-color: rgba(127,214,255,.35);
      box-shadow: 0 10px 22px rgba(127,214,255,.10);
    }
    .nav-left{
      display:flex; align-items:center; gap: 10px;
      min-width: 0;
    }
    .nav-icon{
      width: 34px; height: 34px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      overflow:hidden;
      display:flex; align-items:center; justify-content:center;
      flex: 0 0 auto;
    }
    .nav-icon img{ width: 100%; height: 100%; object-fit: cover; }
    .nav-name{
      font-size: 13px;
      font-weight: 700;
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .nav-meta{
      display:flex; align-items:center; gap: 8px;
      flex: 0 0 auto;
    }
    .badge{
      font-size: 11px;
      padding: 5px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      color: rgba(238,246,255,.86);
    }
    /* âœ… ê³µì„ ë°°ì§€(ê°•ì¡°) */
    .badge.vacant{
      border-color: rgba(134,247,214,.35);
      background: rgba(134,247,214,.12);
      color: rgba(220,255,246,.95);
    }
    /* ë¹„ê³µì„ ë°°ì§€ */
    .badge.occupied{
      border-color: rgba(255,126,162,.35);
      background: rgba(255,126,162,.12);
      color: rgba(255,220,230,.95);
    }

    /* ===== Main ===== */
    .main{
      border: 1px solid var(--stroke);
      background: var(--panel);
      border-radius: var(--radius);
      box-shadow: var(--softGlow);
      backdrop-filter: blur(12px);
      overflow:hidden;
      display:flex;
      flex-direction:column;
      min-height: 560px;
    }
    .toolbar{
      padding: 14px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      display:flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items:center;
      justify-content: space-between;
    }
    .toolbar-left{
      display:flex;
      align-items: baseline;
      gap: 10px;
      min-width: 240px;
    }
    .toolbar-left h2{
      margin:0;
      font-size: 16px;
      font-family: "Diphylleia", serif;
      letter-spacing: .2px;
    }
    .toolbar-left .sub{
      font-size: 12px;
      color: var(--muted);
    }
    .toolbar-right{
      display:flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: flex-end;
      align-items:center;
    }
    .seg{
      display:flex;
      border: 1px solid rgba(255,255,255,.16);
      border-radius: 14px;
      overflow:hidden;
      background: rgba(255,255,255,.06);
    }
    .seg button{
      all: unset;
      cursor:pointer;
      padding: 9px 10px;
      font-size: 12px;
      color: rgba(238,246,255,.82);
      border-right: 1px solid rgba(255,255,255,.10);
      transition: background .12s ease;
    }
    .seg button:last-child{ border-right: none; }
    .seg button.active{
      background: rgba(127,214,255,.16);
      color: rgba(238,246,255,.95);
    }
    .search{
      display:flex;
      align-items:center;
      gap: 8px;
      padding: 9px 10px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
    }
    .search input{
      all: unset;
      width: 200px;
      max-width: 56vw;
      font-size: 12px;
      color: rgba(238,246,255,.92);
    }
    .search input::placeholder{ color: rgba(238,246,255,.5); }

    .content{
      padding: 14px;
      display:flex;
      flex-direction:column;
      gap: 14px;
    }

    .group{
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      border-radius: var(--radius);
      overflow:hidden;
    }
    .group-head{
      padding: 12px 12px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      background: linear-gradient(135deg, rgba(127,214,255,.10), rgba(255,255,255,0));
    }
    .group-title{
      display:flex; align-items:center; gap: 10px; min-width: 0;
    }
    .group-title b{
      font-size: 13px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .group-title span{
      font-size: 12px;
      color: var(--muted);
    }
    .grid{
      padding: 12px;
      display:grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 10px;
    }
    @media (max-width: 1100px){
      .grid{ grid-template-columns: repeat(3, minmax(0, 1fr)); }
    }
    @media (max-width: 720px){
      .grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }

    .card{
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.14);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      overflow:hidden;
      position: relative;
      display:flex;
      flex-direction:column;
      min-height: 92px;
      padding: 10px 10px 9px;
      cursor: default;
    }
    .card-top{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 8px;
      position:relative;
      z-index:1;
    }
    .name{
      font-weight: 800;
      font-size: 13px;
      letter-spacing: .15px;
      line-height: 1.2;
      word-break: keep-all;
    }
    .tag{
      font-size: 11px;
      padding: 5px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.08);
      color: rgba(238,246,255,.88);
      flex: 0 0 auto;
      position:relative;
      z-index:1;
    }

    /* âœ… ê³µì„(ğŸ”’ ì—†ìŒ) ì¹´ë“œ ê°•ì¡° */
    .card.vacant{
      border-color: rgba(134,247,214,.38);
      box-shadow: var(--vacantGlow);
      background: linear-gradient(180deg, rgba(134,247,214,.12), rgba(255,255,255,.04));
    }
    .card.vacant .tag{
      border-color: rgba(134,247,214,.40);
      background: rgba(134,247,214,.14);
      color: rgba(220,255,246,.95);
    }
    /* ë¹„ê³µì„(ğŸ”’ ìˆìŒ) ì¹´ë“œ: ì‚´ì§ ëˆŒëŸ¬ì„œ â€œì°¨ìˆìŒâ€ ëŠë‚Œ */
    .card.occupied{
      opacity: .86;
    }
    .card.occupied .tag{
      border-color: rgba(255,126,162,.40);
      background: rgba(255,126,162,.14);
      color: rgba(255,220,230,.95);
    }

    .hint{
      margin-top:auto;
      font-size: 11px;
      color: rgba(238,246,255,.62);
      position:relative;
      z-index:1;
    }
    .empty{
      padding: 18px;
      border: 1px dashed rgba(255,255,255,.18);
      border-radius: var(--radius);
      background: rgba(255,255,255,.06);
      color: rgba(238,246,255,.75);
      text-align:center;
    }
  </style>
</head>

<body>
  <div class="app">
    <section class="hero">
      <div class="hero-inner">
    
        <!-- âœ… ì¤‘ì•™ ë¡œê³  -->
        <div class="hero-logo"></div>

        <!-- ì˜¤ë¥¸ìª½ í†µê³„ -->
        <div class="stats" id="globalStats"></div>

      </div>
    </section>

    <aside class="sidebar">
      <div class="sidebar-head">
        <div class="title">Academy</div>
        <div class="badge" id="academyCount">-</div>
      </div>
      <nav class="nav" id="academyNav"></nav>
    </aside>

    <main class="main">
      <div class="toolbar">
        <div class="toolbar-left">
          <h2 id="title">ì „ì²´</h2>
          <div class="sub" id="subtitle"></div>
        </div>

        <div class="toolbar-right">
          <!-- âœ… í•„í„° ë¬¸êµ¬ë„ ê³µì„/ë¹„ê³µì„ ê¸°ì¤€ìœ¼ë¡œ -->
          <div class="seg" id="filterSeg">
            <button data-filter="all" class="active">ì „ì²´</button>
            <button data-filter="vacant">ê³µì„ë§Œ</button>
            <button data-filter="occupied">ë¹„ê³µì„ë§Œ</button>
          </div>

          <div class="search">
            <span style="font-size:12px;opacity:.7;">ğŸ”</span>
            <input id="search" placeholder="ì´ë¦„ ê²€ìƒ‰ (ì˜ˆ: í‚¤ë¦¬í›„ì§€, ì•„ë£¨, íˆë§ˆë¦¬...)" />
          </div>
        </div>
      </div>

      <div class="content" id="content"></div>
    </main>
  </div>

  <script>
    /* ===== í•™ì› ì•„ì´ì½˜(ì›í•˜ë©´ ë„¤ ë¡œì»¬ë¡œë„ êµì²´ ê°€ëŠ¥) ===== */
    const ASSETS = {
      academyIcons: {
        "ì´í•™ìƒíšŒ": "https://i.imgur.com/H7juyuM.png",
        "ìƒ¬ë ˆ": "https://i.imgur.com/XKvf4LS.png",
        "ì•„ë¹„ë„ìŠ¤": "https://i.imgur.com/Gajz0vU.png",
        "ê²Œí—¨ë‚˜": "https://i.imgur.com/Y8NIEdP.png",
        "ë°€ë ˆë‹ˆì—„": "https://i.imgur.com/98ggh1V.png",
        "íŠ¸ë¦¬ë‹ˆí‹°": "https://i.imgur.com/fOOIflB.png",
        "ì‚°í•´ê²½": "https://i.imgur.com/FczdaK7.png",
        "ë°±ê·€ì•¼í–‰": "https://i.imgur.com/CZ7BJCO.png",
        "ë¶‰ì€ê²¨ìš¸": "https://i.imgur.com/wYVmPOr.png",
        "ë°œí‚¤ë¦¬": "https://i.imgur.com/cIwxAIc.png",
        "ì•„ë¦¬ìš°ìŠ¤": "https://i.imgur.com/RgNaSeg.png",
        "SRT": "https://i.imgur.com/sMbDc2N.png",
        "ì™€ì¼ë“œí—ŒíŠ¸": "https://i.imgur.com/FLUpb1T.png",
        "ê¸°íƒ€": "https://i.imgur.com/XKvf4LS.png"
      }
    };

    /* ===== ë„¤ data ê·¸ëŒ€ë¡œ (í•„ìš”í•˜ë©´ ì—¬ê¸°ë§Œ êµì²´) ===== */
    const data = {
      "ì´í•™ìƒíšŒ": ["ë‚˜ë‚˜ê°€ë¯¸ ë¦°","ìœ ë¼í‚¤ ëª¨ëª¨ì¹´","ì´ì™€ë¹„ì¸  ì•„ìœ ë¬´","ì‹œë¼ëˆ„ì´ ì¹´ì•¼","ì˜¤í‚¤ ì•„ì˜¤ì´","ìŠ¤ëª¨ëª¨","í•˜ì´ë„¤"],
      "ìƒ¬ë ˆ": ["ì•„ë¡œë‚˜","í”„ë¼ë‚˜"],
      "ì•„ë¹„ë„ìŠ¤": ["íƒ€ì¹´ë‚˜ì‹œ í˜¸ì‹œë…¸ ğŸ”’","ì´ììš”ì´ ë…¸ë…¸ë¯¸","ìŠ¤ë‚˜ì˜¤ì˜¤ì¹´ë¯¸ ì‹œë¡œì½”","ì¿ ë¡œë¯¸ ì„¸ë¦¬ì¹´","ì˜¤ì¿ ì†Œë¼ ì•„ì•¼ë„¤","ìŠ¤ë‚˜ì˜¤ì˜¤ì¹´ë¯¸ ì‹œë¡œì½”(í…ŒëŸ¬)","ì¿ ì¹˜ë‚˜ì‹œ ìœ ë©”"],
      "ê²Œí—¨ë‚˜": {
        "ë§Œë§ˆì „": ["í•˜ëˆ„ë§ˆ ë§ˆì½”í† ","ì¿„ê³ ì¿  ì‚¬ì¸ í‚¤","ë‚˜ì¸ ë©” ì´ë¡œí•˜ ğŸ”’","ëª¨í† ë¯¸ì•¼ ì¹˜ì•„í‚¤","íƒ„ê°€ ì´ë¶€í‚¤"],
        "ì„ ë„ë¶€": ["ì†Œë¼ì‚¬í‚¤ íˆë‚˜","ì•„ë§ˆìš° ì•„ì½” ğŸ”’","ì‹œë¡œë¯¸ ì´ì˜¤ë¦¬","íˆë…¸ë¯¸ì•¼ ì¹˜ë‚˜ì¸ "],
        "í¥ì‹ ì†Œ": ["ë¦¬ì¿ í•˜ì¹˜ë§ˆ ì•„ë£¨","ì˜¤ë‹ˆì¹´íƒ€ ì¹´ìš”ì½”","ì•„ì‚¬ê¸° ë¬´ì¸ í‚¤ ğŸ”’","ì´êµ¬ì‚¬ í•˜ë£¨ì¹´"],
        "ë¯¸ì‹ì—°êµ¬íšŒ": ["ì¿ ë¡œë‹¤í…Œ í•˜ë£¨ë‚˜","ì™€ë‹ˆë¶€ì¹˜ ì•„ì¹´ë¦¬","ì‹œì‹œë„ìš° ì´ì¦ˆë¯¸","ì•„ì¹´ì‹œ ì¤€ì½”"],
        "ì˜¨ì²œê°œë°œë¶€": ["í‚¤ëˆ„ê°€ì™€ ì¹´ìŠ¤ë¯¸","ì‹œëª¨ì¿ ë¼ ë©”êµ¬"],
        "ë°˜ì§ë°˜ì§ë¶€": ["ìš”ìì¿ ë¼ í‚¤ë¼ë¼","í•˜íƒ€ë¯¸ ì—ë¦¬ì¹´"],
        "ê¸‰ì–‘ë¶€": ["ì•„ì´í‚¤ìš” í›„ìš°ì¹´","ìš°ì‹œë§ˆí‚¤ ì£¼ë¦¬"],
        "ì‘ê¸‰ì˜í•™ë¶€": ["íˆë¬´ë¡œ ì„¸ë‚˜"]
      },
      "ë°€ë ˆë‹ˆì—„": {
        "ì„¸ë¯¸ë‚˜": ["ì¸ ì¹´ì¸ í‚¤ ë¦¬ì˜¤","í•˜ì•¼ì„¸ ìœ ìš°ì¹´","ìš°ì‹œì˜¤ ë…¸ì•„ ğŸ”’","ì¿ ë¡œì‚¬í‚¤ ì½”ìœ í‚¤ ğŸ”’"],
        "ê²Œì„ê°œë°œë¶€": ["í•˜ë‚˜ì˜¤ì¹´ ìœ ì¦ˆ","ì‚¬ì´ë°” ë¯¸ë„ë¦¬","ì‚¬ì´ë°” ëª¨ëª¨ì´","í…ë„ ì•„ë¦¬ìŠ¤ ğŸ”’","KEY"],
        "ë² ë¦¬íƒ€ìŠ¤": ["ì¹´ê°€ë¯¸ ì¹˜íˆë¡œ","ì˜¤í† ì„¸ ì½”íƒ€ë§ˆ","ì˜¤ë§ˆê°€ë¦¬ í•˜ë ˆ","ì½”ëˆ„ë¦¬ ë§ˆí‚¤"],
        "C&C": ["ë¯¸ì¹´ëª¨ ë„¤ë£¨ ğŸ”’","ì´ì¹˜ë…¸ì„¸ ì•„ìŠ¤ë‚˜","ì¹´ì¿ ë‹¤í…Œ ì¹´ë¦°","ë¬´ë¡œì¹´ì‚¬ ì•„ì¹´ë„¤","ì•„ìŠ¤ë§ˆ í† í‚¤"],
        "ì—”ì§€ë‹ˆì–´ë¶€": ["ì‹œë¼ì´ì‹œ ìš°íƒ€í•˜","ë„¤ì½”ì¦ˆì¹´ íˆë¹„í‚¤","í† ìš”ë¯¸ ì½”í† ë¦¬"],
        "íŠ¸ë ˆì´ë‹ë¶€": ["ì˜¤í† í•˜ë‚˜ ìŠ¤ë¯¸ë ˆ","ë…¸ë§ˆì‚¬ ë ˆì´"],
        "ì´ˆí˜„ìƒíŠ¹ë¬´ë¶€": ["ì•„ì¼€ë³´ì‹œ íˆë§ˆë¦¬ ğŸ”’","ì´ì¦ˆë¯¸ëª¨í†  ì—ì´ë¯¸"]
      },
      "íŠ¸ë¦¬ë‹ˆí‹°": {
        "í‹°íŒŒí‹°": ["í‚¤ë¦¬í›„ì§€ ë‚˜ê¸°ì‚¬ ğŸ”’","ë¯¸ì†Œë…¸ ë¯¸ì¹´ ğŸ”’","ìœ ë¦¬ì¡°ë…¸ ì„¸ì´ì•„ ğŸ”’"],
        "ë³´ì¶©ìˆ˜ì—…ë¶€": ["ì•„ì§€íƒ€ë‹ˆ íˆí›„ë¯¸","ì‹œë¼ìŠ¤ ì•„ì¦ˆì‚¬ ğŸ”’","ìš°ë¼ì™€ í•˜ë‚˜ì½”","ì‹œëª¨ì— ì½”í•˜ë£¨ ğŸ”’"],
        "ìê²½ë‹¨": ["ëª¨ë¦¬ì¦ˆí‚¤ ìŠ¤ì¦ˆë¯¸","ìš°ìì™€ ë ˆì´ì‚¬"],
        "ë„ì„œë¶€": ["ì½”ì œí‚¤ ìš°ì´","ì—”ë„ìš° ì‹œë¯¸ì½”"],
        "ë°©ê³¼í›„ ë””ì €íŠ¸ë¶€": ["ì¿„ì•¼ë§ˆ ì¹´ì¦ˆì‚¬ ğŸ”’","ì¿ ë¦¬ë¬´ë¼ ì•„ì´ë¦¬","ì´ë°”ë¼ê¸° ìš”ì‹œë¯¸","ìœ í† ë¦¬ ë‚˜ì¸ "],
        "êµ¬í˜¸ê¸°ì‚¬ë‹¨": ["ì•„ì˜¤ëª¨ë¦¬ ë¯¸ë„¤","ìŠ¤ë¯¸ ì„¸ë¦¬ë‚˜","ì•„ì‚¬ê°€ì˜¤ í•˜ë‚˜ì—"],
        "ì •ì˜ì‹¤í˜„ë¶€": ["ì¼„ìí‚¤ ì¸ ë£¨ê¸°","í•˜ë„¤ì¹´ì™€ í•˜ìŠ¤ë¯¸","ë‚˜ì¹´ë§ˆì‚¬ ì´ì¹˜ì¹´ ğŸ”’","ì‹œì¦ˆì•¼ë§ˆ ë§ˆì‹œë¡œ"],
        "ì‹œìŠ¤í„°í›„ë“œ": ["ìš°íƒ€ì¦ˆë¯¸ ì‚¬ì¿ ë¼ì½”","ì™€ì¹´ë°” íˆë‚˜íƒ€","ì´ì˜¤ì¹˜ ë§ˆë¦¬ ğŸ”’"]
      },
      "ì‚°í•´ê²½": {
        "í˜„ë£¡ë¬¸": ["ë¥˜ìš°ê²Œ í‚¤ì‚¬í‚¤ ğŸ”’","ì½”ë…¸ì— ë¯¸ë‚˜ ğŸ”’"],
        "ì—°ë‹¨ë°©": ["ì•¼ì¿ ì‹œ ì‚¬ì•¼"],
        "ë§¤í™”ì›": ["ìŠ¤ë…¸í•˜ë¼ ìŠŒ","ìŠ¤ë…¸í•˜ë¼ ì½”ì½”ë‚˜"],
        "í˜„ë¬´ìƒíšŒ": ["ì•„ì¼€ì‹œë¡œ ë£¨ë¯¸ ğŸ”’","ì¹´ì•¼ë§ˆ ë ˆì´ì£ "]
      },
      "ë°±ê·€ì•¼í–‰": {
        "ìŒì–‘ë¶€": ["ì•„ë§ˆì¹˜ ë‹ˆì•¼","ì¿ ì™€ì¹´ë¯¸ ì¹´í˜¸","ì™€ë¼ì¿  ì¹˜ì„¸"],
        "ë§ˆì¸ ë¦¬ìš´ì˜ê´€ë¦¬ë¶€": ["ì¹´ì™€ì™€ ì‹œì¦ˆì½”","ì•„ì‚¬íˆë‚˜ í”¼ë‚˜","ì‚¬í† í•˜ë§ˆ ìš°ë¯¸ì¹´"],
        "ìˆ˜í–‰ë¶€": ["ì¹´ìŠ¤ê°€ ì¸ ë°”í‚¤","ë¯¸ì¦ˆí•˜ ë¯¸ëª¨ë¦¬","ì´ì‚¬ë¯¸ ì¹´ì—ë°"],
        "ì¸ë²•ì—°êµ¬ë¶€": ["ì¹˜ë„ë¦¬ ë¯¸ì¹˜ë£¨","ì˜¤ë…¸ ì¸ ì¿ ìš”","ì¿ ë‹¤ ì´ì¦ˆë‚˜"],
        "ë°±í™”ìš”ë€": ["ì¿ ì¦ˆë…¸í•˜","ê³ ë£Œ ë‚˜êµ¬ì‚¬ ğŸ”’","í›„ì™€ ë Œê²Œ","í‚¤ë¥˜ í‚¤ì¿„","ì¹´ë°ë…¸ì½”ì§€ ìœ ì¹´ë¦¬"],
        "í™”ì¡°í’ì›”ë¶€": ["ì•¼ë¶€í‚¤ ìŠˆë¡œ","ì½”ì¿ ë¦¬ì½”"]
      },
      "ë¶‰ì€ê²¨ìš¸": {
        "ì‚¬ë¬´êµ­": ["ë Œì¹´ì™€ ì²´ë¦¬ë…¸","ì‚¬ì‹œë¡œ í† ëª¨ì—","ì´ì¼€ì¿ ë¼ ë§ˆë¦¬ë‚˜"],
        "227í˜¸ íŠ¹ë³„ë°˜": ["ì•„ë§ˆë¯¸ ë…¸ë„ì¹´","ë§ˆìš”ì´ ì‹œêµ¬ë ˆ"],
        "ì§€ì‹í•´ë°©ì „ì„ ": ["íˆë©”í‚¤ ë©”ë£¨","ì•„í‚¤ì´ì¦ˆë¯¸ ëª¨ë¯¸ì§€"],
        "ìš©ì—­ë¶€": ["ì•¼ìŠ¤ëª¨ë¦¬ ë¯¸ë…¸ë¦¬"],
        "ì¶œíŒë¶€": ["ë¯¸ìš”ì‹œ íƒ€ì¹´ë„¤"]
      },
      "ë°œí‚¤ë¦¬": ["ì˜¤ê°€íƒ€ ì¹¸ë‚˜","ì½”ë…¸ì¹´ ğŸ”’","ë‚˜ì¹´ì¸ ì¹´ì‚¬ í‚¤ë¦¬ë…¸","ë„¤ë¬´ê°€í‚¤ í›„ë¶€í‚¤"],
      "ì•„ë¦¬ìš°ìŠ¤": ["ì¡°ë§ˆì— ì‚¬ì˜¤ë¦¬ ğŸ”’","ì´ë§ˆì‹œë…¸ ë¯¸ì‚¬í‚¤","ì¸ ì¹˜ë‚˜ê°€ íˆìš”ë¦¬","í•˜ì¹´ë¦¬ ì•„ì¸ ì½” ğŸ”’"],
      "SRT": {
        "Rabbit ì†ŒëŒ€": ["ì¸ í‚¤ìœ í‚¤ ë¯¸ì•¼ì½”","ì†Œë¼ì´ ì‚¬í‚¤","ì¹´ì œì¿ ë¼ ëª¨ì—","ì¹´ìŠ¤ë¯¸ìì™€ ë¯¸ìœ "],
        "Fox ì†ŒëŒ€": ["ì‹œì¹˜ë„ ìœ í‚¤ë…¸","ë‹ˆì½”","ì¿ ë£¨ë¯¸","ì˜¤í† ê¸°"]
      },
      "ì™€ì¼ë“œí—ŒíŠ¸": { "ì˜¤ì»¬íŠ¸ ì—°êµ¬íšŒ": ["ì‹œë¼ì˜¤ ì—ë¦¬","ì‹œì´ë‚˜ ì¸ ë¬´ê¸°","ì´íƒ€ê°€í‚¤ ì¹´ë…¸ì—","í‚¤ëˆ„ì´ ë ˆë‚˜"] },
      "ê¸°íƒ€": {
        "í•˜ì´ëœë”": ["ì•„ì‚¬ê¸°ë¦¬ ìŠ¤ì˜¤ìš°","íƒ€ì¹˜ë°”ë‚˜ íˆì¹´ë¦¬","íƒ€ì¹˜ë°”ë‚˜ ë…¸ì¡°ë¯¸","ìš°ì¸ ë¯¸ ì•„ì˜¤ë°”"],
        "í—¬ë©§ë‹¨": ["ì½”ë§ˆì¹´ì œ ë¼ë¸Œ"],
        "ì¹ ìˆ˜ì¸": ["ì½”ì‚¬ì¹´ ì™€ì¹´ëª¨","í‚¤ìš”ìŠ¤ë¯¸ ì•„í‚¤ë¼ ğŸ”’"],
        "ê¸°íƒ€": ["íˆì£½íˆì£½êµìˆ˜","ë§ì¿ íŠ¸"]
      }
    };

    /* =========================
       Helpers
       ========================= */
    // âœ… ğŸ”’ = ë¹„ê³µì„
    const isOccupied = (name) => String(name).includes("ğŸ”’");
    const isVacant = (name) => !isOccupied(name); // âœ… ê³µì„ì€ ğŸ”’ ì—†ìŒ
    const cleanName = (name) => String(name).replace("ğŸ”’", "").trim();

    function flattenAcademy(academyValue){
      const rows = [];
      if (Array.isArray(academyValue)){
        academyValue.forEach(n => rows.push({ group: null, name: n, vacant: isVacant(n), occupied: isOccupied(n) }));
      } else if (academyValue && typeof academyValue === "object"){
        Object.keys(academyValue).forEach(group => {
          academyValue[group].forEach(n => rows.push({ group, name: n, vacant: isVacant(n), occupied: isOccupied(n) }));
        });
      }
      return rows;
    }

    function getAcademyNames(){ return Object.keys(data); }

    function computeGlobalStats(){
      let total = 0, vacant = 0, occupied = 0;
      getAcademyNames().forEach(a => {
        const rows = flattenAcademy(data[a]);
        total += rows.length;
        vacant += rows.filter(r => r.vacant).length;
        occupied += rows.filter(r => r.occupied).length;
      });
      return { total, vacant, occupied };
    }

    function computeAcademyStats(academy){
      const rows = flattenAcademy(data[academy]);
      const vacant = rows.filter(r => r.vacant).length;
      const occupied = rows.filter(r => r.occupied).length;
      return { total: rows.length, vacant, occupied };
    }

    /* =========================
       UI State
       ========================= */
    const state = { academy: "ì „ì²´", filter: "all", search: "" };

    const elNav = document.getElementById("academyNav");
    const elCount = document.getElementById("academyCount");
    const elTitle = document.getElementById("title");
    const elSubtitle = document.getElementById("subtitle");
    const elContent = document.getElementById("content");
    const elStats = document.getElementById("globalStats");
    const elSearch = document.getElementById("search");

    function renderGlobal(){
      const gs = computeGlobalStats();
      elStats.innerHTML = `
        <div class="pill">
          <div class="dot"></div>
          <div><b>${gs.vacant}</b> <span>ê³µì„</span></div>
        </div>
        <div class="pill">
          <div class="dot occupied"></div>
          <div><b>${gs.occupied}</b> <span>ë¹„ê³µì„</span></div>
        </div>
        <div class="pill">
          <div class="dot" style="background: rgba(238,246,255,.72); box-shadow: 0 0 0 3px rgba(238,246,255,.10);"></div>
          <div><b>${gs.total}</b> <span>ì „ì²´ ìë¦¬</span></div>
        </div>
      `;
    }

    function renderNav(){
      const academies = getAcademyNames();
      elCount.textContent = `${academies.length}ê°œ`;

      const navItems = ["ì „ì²´", ...academies];

      elNav.innerHTML = navItems.map(name => {
        const icon = ASSETS.academyIcons[name] || "";
        const st = (name === "ì „ì²´") ? computeGlobalStats() : computeAcademyStats(name);

        const vacantBadge = `<span class="badge vacant">ê³µì„ ${st.vacant}</span>`;
        const occupiedBadge = `<span class="badge occupied">ë¹„ê³µì„ ${st.occupied}</span>`;
        const totalBadge = `<span class="badge">${st.total}</span>`;
        const active = (state.academy === name) ? "active" : "";

        return `
          <button class="nav-btn ${active}" data-academy="${name}">
            <div class="nav-left">
              <div class="nav-icon">
                ${icon ? `<img alt="" src="${icon}">` : `<span style="font-size:12px;opacity:.7;">â˜…</span>`}
              </div>
              <div class="nav-name">${name}</div>
            </div>
            <div class="nav-meta">
              ${vacantBadge}
              ${occupiedBadge}
              ${totalBadge}
            </div>
          </button>
        `;
      }).join("");

      elNav.querySelectorAll(".nav-btn").forEach(btn => {
        btn.addEventListener("click", () => {
          state.academy = btn.dataset.academy;
          renderAll();
        });
      });
    }

    function groupRows(academyName){
      if (academyName === "ì „ì²´"){
        return getAcademyNames().map(a => {
          const rows = flattenAcademy(data[a]).map(r => ({...r, academy: a}));
          return { groupName: a, rows };
        });
      }

      const value = data[academyName];
      if (Array.isArray(value)){
        return [{
          groupName: academyName,
          rows: value.map(n => ({ academy: academyName, group: null, name: n, vacant: isVacant(n), occupied: isOccupied(n) }))
        }];
      }

      return Object.keys(value).map(g => ({
        groupName: g,
        rows: value[g].map(n => ({ academy: academyName, group: g, name: n, vacant: isVacant(n), occupied: isOccupied(n) }))
      }));
    }

    function applyFilter(rows){
      const q = state.search.trim().toLowerCase();
      return rows.filter(r => {
        // âœ… ê³µì„ë§Œ = ğŸ”’ ì—†ìŒ
        if (state.filter === "vacant" && !r.vacant) return false;
        // âœ… ë¹„ê³µì„ë§Œ = ğŸ”’ ìˆìŒ
        if (state.filter === "occupied" && !r.occupied) return false;

        if (!q) return true;
        return cleanName(r.name).toLowerCase().includes(q);
      });
    }

    function renderFilter(){
      document.querySelectorAll("#filterSeg button").forEach(btn => {
        btn.classList.toggle("active", btn.dataset.filter === state.filter);
      });
    }

    function renderMain(){
      elTitle.textContent = state.academy;
      const st = (state.academy === "ì „ì²´") ? computeGlobalStats() : computeAcademyStats(state.academy);
      elSubtitle.textContent = `ê³µì„ ${st.vacant} Â· ë¹„ê³µì„ ${st.occupied} Â· ì „ì²´ ${st.total}`;

      const groups = groupRows(state.academy);

      // âœ… ê³µì„ì´ ë” ìœ„ì— ì˜¤ê²Œ ì •ë ¬(í•œëˆˆì— ë³´ì´ê²Œ)
      const sortSeats = (arr) => [...arr].sort((a,b) => Number(b.vacant) - Number(a.vacant));

      const sections = groups.map(g => {
        const filtered = sortSeats(applyFilter(g.rows));
        const vacantCount = filtered.filter(r => r.vacant).length;
        const totalCount = filtered.length;

        if (totalCount === 0){
          return `
            <section class="group">
              <div class="group-head">
                <div class="group-title">
                  <b>${g.groupName}</b>
                  <span>í‘œì‹œí•  í•­ëª© ì—†ìŒ</span>
                </div>
                <div class="badge">0</div>
              </div>
              <div class="empty">ì¡°ê±´ì— ë§ëŠ” ìë¦¬ê°€ ì—†ì–´.</div>
            </section>
          `;
        }

        const cards = filtered.map(r => {
          const vacant = r.vacant;      // âœ… ê³µì„(ê°•ì¡°)
          const occupied = r.occupied;  // âœ… ë¹„ê³µì„
          return `
            <div class="card ${vacant ? "vacant" : ""} ${occupied ? "occupied" : ""}">
              <div class="card-top">
                <div class="name">${cleanName(r.name)}</div>
                <div class="tag">${vacant ? "ê³µì„" : "ë¹„ê³µì„"}</div>
              </div>
              <div class="hint">${r.academy}${r.group ? " Â· " + r.group : ""}</div>
            </div>
          `;
        }).join("");

        return `
          <section class="group">
            <div class="group-head">
              <div class="group-title">
                <b>${g.groupName}</b>
                <span>ê³µì„ ${vacantCount} / ${totalCount}</span>
              </div>
              <div class="badge">${totalCount}</div>
            </div>
            <div class="grid">${cards}</div>
          </section>
        `;
      }).join("");

      elContent.innerHTML = sections || `<div class="empty">í‘œì‹œí•  ë°ì´í„°ê°€ ì—†ì–´.</div>`;
    }

    function renderAll(){
      renderGlobal();
      renderNav();
      renderFilter();
      renderMain();
    }

    document.querySelectorAll("#filterSeg button").forEach(btn => {
      btn.addEventListener("click", () => {
        state.filter = btn.dataset.filter;
        renderAll();
      });
    });

    elSearch.addEventListener("input", (e) => {
      state.search = e.target.value || "";
      renderMain();
    });

    renderAll();
  </script>
</body>
</html>
